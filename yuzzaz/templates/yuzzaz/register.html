{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- [Previous head content remains the same] -->
    <style>
        /* Additional custom styles */
        .register-background {
            background: linear-gradient(135deg, rgba(67, 65, 55, 0.1) 0%, rgba(18, 18, 18, 0.9) 100%), 
                        {% comment %} url("{% static 'images/fav.png' %}"); {% endcomment %}
                        url("{% static 'images/bg.jpg' %}");
                        {% comment %} url("https://images.unsplash.com/photo-1532187863486-abf9dbad1b69?ixlib=rb-4.0.3&auto=format&fit=crop&w=1740&q=80") {% endcomment %}
            background-size: cover;
            background-position: center;
        }
    </style>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="google-site-verification" content="wEtt2II-thlRgNpqM24dfMRBAooIPCGV-CH6d56R-WY" />
        <meta name="msvalidate.01" content="DEE2AF02ED59562E2DCA645D7F9B738F" />
    <title>Register | Voima</title>

    <link rel="shortcut icon" href="{% static 'images/fav.png' %}" type="image/x-icon">
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Google Fonts - Karla -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sen:wght@400..800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sarina&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'css/output.css' %}" />
    <link rel="stylesheet" href="{% static 'css/custom.css' %}" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              maroon: "#9b1f28",
              dark: "#121212",
              light: "#f8f9fa",
            },
            fontFamily: {
              karla: ["Sen", "sans-serif"],
              saint: ["Sarina", "cursive"],
            },
            animation: {
              "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
            },
          },
        },
      };
    </script>

    <!-- Custom Styles -->
    <style>
      @keyframes progress {
        from {
          width: 100%;
        }

        to {
          width: 0%;
        }
      }

      .animate-progress {
        animation: progress 5s linear forwards;
      }

      .bg-register {
        background-image: url("{% static 'images/education-illustration.svg' %}");
        background-repeat: no-repeat;
        background-size: cover;
        background-attachment: fixed;
        background-position: center;
      }

      .carousel-image {
        filter: brightness(0.7);
      }

      .form-input {
        transition: all 0.3s ease;
      }

      .form-input:focus {
        box-shadow: 0 0 0 2px rgba(128, 0, 0, 0.3);
      }
    </style>
  </head>
<body class="register-background font-karla text-gray-100 min-h-screen">
    <!-- Navigation [remains the same] -->

    <div class="min-h-[calc(100vh-4rem)] flex items-center justify-center p-6">
        <div class="w-full max-w-7xl mx-auto grid md:grid-cols-2 gap-16">
            <!-- Informational Column -->
            <div class="hidden md:flex flex-col justify-center space-y-8 p-8 bg-black/50 backdrop-blur-lg rounded-xl shadow-2xl border border-gray-700/30">
                <div class="flex items-center mb-6">
                    <div class="bg-maroon p-3 rounded-full mr-4 flex items-center justify-center w-12 h-12">
                        <i class="fas fa-sign-in-alt text-white text-xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold uppercase tracking-wide">
                        <span class="underline underline-offset-8 decoration-maroon">Voima Access</span>
                    </h3>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-start gap-4">
                        <i class="fas fa-shield-alt text-maroon text-2xl mt-1"></i>
                        <div>
                            <h4 class="text-lg font-semibold">Secure Authentication</h4>
                            <p class="text-gray-400 text-sm">
                                Your data is protected with advanced encryption and multi-factor authentication.
                            </p>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-4">
                        <i class="fas fa-users text-maroon text-2xl mt-1"></i>
                        <div>
                            <h4 class="text-lg font-semibold">Community Access</h4>
                            <p class="text-gray-400 text-sm">
                                Connect with researchers, healthcare professionals, and sickle cell advocates.
                            </p>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-4">
                        <i class="fas fa-chart-line text-maroon text-2xl mt-1"></i>
                        <div>
                            <h4 class="text-lg font-semibold">Research Insights</h4>
                            <p class="text-gray-400 text-sm">
                                Gain exclusive access to cutting-edge research and community programs.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Register Form Column -->
            <div class="flex items-center justify-center">
                {% comment %} <div class="w-full max-w-md bg-gray-800/20 backdrop-blur-lg rounded-xl shadow-2xl border border-gray-700/30 p-8"> {% endcomment %}
                <div class="w-full max-w-md rounded-xl">
                    <form method="POST" class="space-y-6">
                        <div class="text-center mb-8">

                        <img src="{% static 'images/fav.png' %}" alt="Voima Logo" class="mx-auto h-48 w-48 mb-4 object-contain">
                        <h2 class="text-3xl font-extrabold text-white">Sign Up</h2>
                        <p class="mt-2 text-gray-400">Create an account to start your journey</p>
                    </div>



                        <!-- Google Sign-In -->
                        {% comment %} <a href="{% url 'social:begin' 'google-oauth2' %}?next={% url 'home' %}"> {% endcomment %}

                  <a href="{% if not user.is_authenticated %}{% url 'social:begin' 'google-oauth2' %}?next={% url 'home' %}{% else %}{% url 'set_user_type_and_login' %}{% endif %}">

                            <button
                                type="button"
                                class="w-full bg-white text-gray-800 py-3 rounded-lg hover:bg-gray-100 transition flex items-center justify-center my-6"
                            >
                                <i class="fab fa-google mr-2 text-red-500"></i> Continue with Google
                            </button>
                        </a>


                        <!-- Divider -->
                        <div class="flex items-center my-6">
                            <hr class="flex-grow border-gray-600/30" />
                            <span class="mx-4 text-gray-100 text-sm">OR</span>
                            <hr class="flex-grow border-gray-600/30" />
                        </div>

                {% csrf_token %} 
                {% for field in form %}
                <div>
                  {% if field.field.widget.input_type == "checkbox" %} 
                  {% if user_type == "intern" %}
                  <div class="flex items-start space-x-2">
                    <input
                      type="checkbox"
                      id="{{ field.id_for_label }}"
                      name="{{ field.html_name }}"
                      class="form-checkbox h-5 w-5 text-maroon focus:ring-maroon"
                      required
                    />
                    <label
                      for="{{ field.id_for_label }}"
                      class="text-sm text-gray-300"
                    >
                      I will be applying for an Internship position
                    </label>
                  </div>
                  {% endif %} {% else %}
                  <label
                    for="{{ field.id_for_label }}"
                    class="block text-sm font-medium text-gray-300 mb-1"
                  >
                    {{ field.label }}
                  </label>
                  <div class="relative">
                    <div
                      class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                    >
                      {% if field.field.widget.input_type == "email" %}
                      <i class="fas fa-envelope text-white"></i>
                      {% elif field.field.widget.input_type == "password" %}
                      <i class="fas fa-lock text-white"></i>
                      {% else %}
                      <i class="fas fa-user text-white"></i>
                      {% endif %}
                    </div>
                    <input
                      type="{{ field.field.widget.input_type|default:'text' }}"
                      id="{{ field.id_for_label }}"
                      name="{{ field.html_name }}"
                      value="{{ field.value|default_if_none:'' }}"
                      class="form-input  border-b border-gray-100 text-white placeholder-gray-400 focus:ring-maroon focus:border-maroon block w-full pl-10 pr-3 py-3 rounded-lg"
                      placeholder="{{ field.label }}"
                      {%
                      for
                      attr,
                      value
                      in
                      field.field.widget.attrs.items
                      %}
                      {{
                      attr
                      }}="{{ value }}"
                      {%
                      endfor
                      %}
                      required
                    />
                  </div>
                  {% if field.errors %}
                  <p class="mt-1 text-sm text-red-500">
                    {{ field.errors|join:', ' }}
                  </p>
                  {% endif %} {% endif %}
                </div>
                {% endfor %}

                        <!-- Submit Button -->
                        <button
                            type="submit"
                            class="w-full bg-maroon text-white py-3 rounded-lg hover:bg-maroon/90 transition flex items-center justify-center"
                        >
                            <i class="fas fa-sign-in-alt mr-2"></i> Sign Up
                        </button>

                        <!-- Registration Link -->
                        <div class="text-center mt-4">
                            <p class="text-gray-400">
                                Already have an account? 
                                <a href="{% url 'login' %}" class="text-maroon hover:underline">
                                    Sign In
                                </a>
                            </p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- [Previous scripts remain the same] -->

    <!-- Toast Messages -->
    {% if messages %}
    <div
      class="toast-message fixed top-4 right-4 space-y-3 z-50 w-full max-w-xs"
    >
      {% for message in messages %}
      <div class="overflow-hidden rounded-lg shadow-lg mb-4 animate-fade-in-up">
        <div
          class="{% if message.tags == 'success' %}bg-green-600 {% elif message.tags == 'error' %}bg-red-600 {% elif message.tags == 'warning' %}bg-yellow-600 {% elif message.tags == 'info' %}bg-blue-600 {% else %}bg-gray-800{% endif %} px-4 py-3 text-white"
        >
          <div class="flex items-start">
            <div class="flex-shrink-0 pt-0.5">
              {% if message.tags == 'success' %}
              <i class="fas fa-check-circle"></i>
              {% elif message.tags == 'error' %}
              <i class="fas fa-exclamation-circle"></i>
              {% elif message.tags == 'warning' %}
              <i class="fas fa-exclamation-triangle"></i>
              {% elif message.tags == 'info' %}
              <i class="fas fa-info-circle"></i>
              {% else %}
              <i class="fas fa-bell"></i>
              {% endif %}
            </div>
            <div class="ml-3 w-0 flex-1 pt-0.5">
              <p class="text-sm font-medium">{{ message }}</p>
            </div>
            <div class="ml-4 flex-shrink-0 flex">
              <button
                class="bg-transparent rounded-md inline-flex text-white hover:text-gray-300 focus:outline-none"
                onclick="this.closest('.toast-message').remove()"
              >
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="bg-black/20 h-1 w-full">
          <div
            class="{% if message.tags == 'success' %}bg-green-300 {% elif message.tags == 'error' %}bg-red-300 {% elif message.tags == 'warning' %}bg-yellow-300 {% elif message.tags == 'info' %}bg-blue-300 {% else %}bg-gray-300{% endif %} h-full animate-progress"
          ></div>
        </div>
      </div>
      {% endfor %}
    </div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toasts = document.querySelectorAll(".toast-message");

    toasts.forEach((toast) => {
      const progress = toast.querySelector(".toast-progress");
      const duration = 5000; // 5s

      // Animate progress bar
      progress.style.transition = `transform ${duration}ms linear`;
      progress.style.transform = "scaleX(0)";

      // Remove toast after duration
      setTimeout(() => {
        toast.classList.add("opacity-0", "translate-y-2"); // smooth fade
        setTimeout(() => toast.remove(), 300); // wait for fade-out
      }, duration);
    });
  });
</script>


    {% endif %}

    <!-- JavaScript -->
    <script>
      // Mobile menu toggle
      document
        .querySelector('[aria-controls="mobile-menu"]')
        .addEventListener("click", function () {
          document.getElementById("mobile-menu").classList.toggle("hidden");
        });

      // Simple carousel functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Carousel
        const carouselItems = document.querySelectorAll("[data-carousel-item]");
        let currentIndex = 0;

        function showSlide(index) {
          carouselItems.forEach((item, i) => {
            item.classList.toggle("opacity-0", i !== index);
          });
        }

        // Next button
        document
          .querySelector("[data-carousel-next]")
          ?.addEventListener("click", function () {
            currentIndex = (currentIndex + 1) % carouselItems.length;
            showSlide(currentIndex);
          });

        // Previous button
        document
          .querySelector("[data-carousel-prev]")
          ?.addEventListener("click", function () {
            currentIndex =
              (currentIndex - 1 + carouselItems.length) % carouselItems.length;
            showSlide(currentIndex);
          });

        // Auto-advance carousel
        setInterval(() => {
          currentIndex = (currentIndex + 1) % carouselItems.length;
          showSlide(currentIndex);
        }, 5000);

        // Initialize first slide
        showSlide(0);

        // Toast dismissal
        document.querySelectorAll("[data-dismiss-toast]").forEach((button) => {
          button.addEventListener("click", function () {
            this.closest(".toast").remove();
          });
        });

        // Auto-dismiss toasts after 5 seconds
        setTimeout(() => {
          document.querySelectorAll(".toast").forEach((toast) => {
            toast.remove();
          });
        }, 5000);
      });
    </script>
  </body>
</html>
